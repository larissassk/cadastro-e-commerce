<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.84.0">
    <title>Fomulário de cadastro de E-commerce</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/checkout/">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    
    <link rel="stylesheet" href="cep.js">

    <!-- Bootstrap core CSS -->
<link href="../assets/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>

    
    <!-- Custom styles for this template -->
    <link href="form-validation.css" rel="stylesheet">
  </head>

  <body class="bg-light">

   <style>
     .form-control-dark {
      border-color: var(--bs-gray);
  }
     .form-control-dark:focus {
     border-color: #fff;
      box-shadow: 0 0 0 .25rem rgba(255, 255, 255, .25);
}
    .text-small {
    font-size: 85%;
}
    .dropdown-toggle:not(:focus) {
    outline: 0;
}
</style>

      <header class="p-3 text-bg-dark">
        <div class="container">
          <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
            
              <img src="img\logo-ecommerce.png" width="70" height="70" class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap"><use xlink:href="#bootstrap"/> <h1>Cadastre-se</h1></svg>
            </a>

        </div>
      </header>

  
<div class="container">
  <main>
    <div class="py-5 text-center">
    </div>
    <h2>Realizar cadastro de compra.</h2>
    <form class="row g-3">
        <div class="col-sm-5">
            <label for="nome" class="form-label">Nome</label>
            <input type="text" class="form-control" id="nome" placeholder="insira seu nome" value="" required>
          </div>

          <div class="col-sm-5">
            <label for="sobrenome" class="form-label">Sobrenome</label>
            <input type="text" class="form-control" id="sobrenome" placeholder="insira seu sobrenome " value="" required>
          </div>
            <div class="col-sm-5">
              <label for="data" class="form-label">Data de nascimento</label>
              <input type="date" class="form-control" id="data" placeholder="insira sua data" value="" required>
            </div>

            <div class="col-sm-5">
              <label for="cpf" class="form-label">CPF</label>
              <input type="text" class="form-control" id="cpf" name="cpf">
              <p id="cpf-error" class="error-message"></p>
          </div>
          

            <script>
              function validarCPF(cpf) {
    cpf = cpf.replace(/\D/g, ''); // Remove caracteres não numéricos

    if (cpf.length !== 11 || /^(.)\1{10}$/.test(cpf)) {
        return false; // CPF inválido
    }

    let soma = 0;
    for (let i = 0; i < 9; i++) {
        soma += parseInt(cpf.charAt(i)) * (10 - i);
    }
    let digitoVerificador1 = soma % 11 < 2 ? 0 : 11 - (soma % 11);

    if (digitoVerificador1 !== parseInt(cpf.charAt(9))) {
        return false; // CPF inválido
    }

    soma = 0;
    for (let i = 0; i < 10; i++) {
        soma += parseInt(cpf.charAt(i)) * (11 - i);
    }
    let digitoVerificador2 = soma % 11 < 2 ? 0 : 11 - (soma % 11);

    if (digitoVerificador2 !== parseInt(cpf.charAt(10))) {
        return false; // CPF inválido
    }

    return true; // CPF válido
}

const cpfInput = document.getElementById("cpf");
const cpfError = document.getElementById("cpf-error");

cpfInput.addEventListener("input", function () {
    if (validarCPF(cpfInput.value)) {
        cpfError.textContent = ""; // Limpa mensagem de erro
    } else {
        cpfError.textContent = "CPF inválido";
    }
});
            </script>            
            <style>
                  /* Estilize todos os campos de entrada */
                      input {
                          width: 100%; /* Defina a largura para 100% para igualar o tamanho */
                          padding: 10px;
                          margin-bottom: 10px;
                          border: 1px solid #ccc;
                          border-radius: 4px;
                          font-size: 16px;
                      }

                      /* Estilize a mensagem de erro */
                      .error-message {
                          color: red;
                          font-size: 14px;
                      }

            </style>

        <div class="col-6">
            <label for="email" class="form-label">Email</label>
            <input type="email" class="form-control" id="email" placeholder="email@email.com">
        </div>

        <div class="col-4">
            <label for="senha" class="form-label">Senha</label>
            <input type="password" class="form-control" id="p" placeholder="123456" required>
            </div>
        <div class="col-md-5">
            <label for="inputZip" class="form-label">CEP</label>
            <input type="text" class="form-control" id="cep" placeholder="00000-000" required>
          </div>
          <div class="col-md-5">
            <label for="inputCity" class="form-label">Cidade</label>
            <input type="text" class="form-control" id="cidade">
          </div>
        <div class="col-6">
          <label for="inputAddress" class="form-label"> Endereço</label>
          <input type="text" class="form-control" id="rua" placeholder="Rua Joaquim Nabuco">
        </div>
        <div class="col-4">
          <label for="inputAddress" class="form-label"> Numero</label>
          <input type="text" class="form-control" id="numero" placeholder="123">
        </div>
        <div class="col-5">
          <label for="inputAddress2" class="form-label">Bairro</label>
          <input type="text" class="form-control" id="bairro">
        </div>
        <div class="col-md-5">
          <label for="inputState" class="form-label">Estado</label>
          <input type="text" class="form-control" id="estado">
        </div>
        <div class="col-12">
          <button style="background-color: #5271FF ;" type="submit" class="btn btn-primary">Cadastrar</button><br>
        </div>
        <script>
          
        //------JS para CEP------
        'use restrict'; 
//Modo restrito

//Limpar formulário
const LimparFormulario = (endereco) =>{
    document.getElementById('rua').value = '';
    document.getElementById('bairro').value = '';
    document.getElementById('cidade').value = '';
    document.getElementById('estado').value = '';
    document.getElementById('nome').value = '';
    document.getElementById('sobrenome').value = '';
}
//Verifica se CEP é válido
const eNumero = (numero) => /^[0-9]+$/.test(numero);
const cepValido = (cep) => cep.length == 8 && eNumero(cep);
//preenche campos do formulario
const preencheFormulario = (endereco) =>{
    document.getElementById('rua').value = endereco.logradouro;
    document.getElementById('bairro').value = endereco.bairro;
    document.getElementById('cidade').value = endereco.localidade;
    document.getElementById('estado').value = endereco.uf;

}
/*função para consumo de API utilizando a função do tipo assimcrona*/
const pesquisarcep = async() =>{
    LimparFormulario();
    const url = `http://viacep.com.br/ws/${cep.value}/json/`;
    if(cepValido(cep.value)){
        const dados = await fetch(url);
        const addres = await dados.json();
        if(addres.hasOwnProperty('erro')){
            alert('cep não encontrado');
    }else{
        preencheFormulario(addres);
    }
}else{
    alert('cep incorreto');
    }
}
// Adiciona um evento DOM, no input CEP
document.getElementById('cep').addEventListener('focusout', pesquisarcep);

        </script>
      </form>
      
      <script>

</script>

        </form>
      </div>
    </div>
  </main>
  <footer class="my-5 pt-5 text-muted text-center text-small">
      <li class="list-inline-item"><a href="index.html">Voltar</a></li>
    </ul>
  </footer>
</div>


    <script src="../assets/dist/js/bootstrap.bundle.min.js"></script>

      <script src="form-validation.js"></script>
  </body>
</html>
