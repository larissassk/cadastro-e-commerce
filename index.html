<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.84.0">
    <title>Fomulário de cadastro </title>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/checkout/">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="cep.js">
    <link rel="stylesheet" href="form-validation.js">
    

    <!-- Bootstrap core CSS -->
<link href="../assets/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>

    
    <!-- Custom styles for this template -->
    <link href="form-validation.css" rel="stylesheet">
  </head>

  <body class="bg-light">

   <style>
     .form-control-dark {
      border-color: var(--bs-gray);
  }
     .form-control-dark:focus {
     border-color: #fff;
      box-shadow: 0 0 0 .25rem rgba(255, 255, 255, .25);
}
    .text-small {
    font-size: 85%;
}
    .dropdown-toggle:not(:focus) {
    outline: 0;
}
</style>

      <header class="p-3 text-bg-dark">
        <div class="container">
          <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
            
              <img src="img\logo-ecommerce.png" width="70" height="70" class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap"><use xlink:href="#bootstrap"/> <h1>Cadastre-se</h1></svg>
            </a>

        </div>
      </header>
<div class="container">
  <main>
    <div class="py-5 text-center">
    </div>
    <h2>Realizar cadastro de compra.</h2>
    <form class="row g-3">
        <div class="col-sm-5">
            <label for="nome" class="form-label">Nome</label>
            <input type="text" class="form-control" id="nome" placeholder="Insira seu nome" value="" required>
          </div>

          <div class="col-sm-5">
            <label for="sobrenome" class="form-label">Sobrenome</label>
            <input type="text" class="form-control" id="sobrenome" placeholder="Insira seu sobrenome " value="" required>
          </div>
            <div class="col-sm-5">
              <label for="data" class="form-label">Data de nascimento</label>
              <input type="date" class="form-control" id="data" placeholder="insira sua data" value="" required><br>
            </div>

          <div class="row">
              <div class="col-5">
                <label for="cpf" class="form-label">CPF</label>
                <input type="text" class="form-control custom-input" id="cpf" placeholder="Digite seu CPF" onblur="validar()">
           
            </div>
            <p id="mensagem"></p>
          </div>
          <div class="col-6">
              <label for="email" class="form-label">Email</label>
              <input type="email" class="form-control" id="email" placeholder="email@email.com">
          </div>

          <div class="col-4">
              <label for="senha" class="form-label">Senha</label>
              <input type="password" class="form-control" id="p" placeholder="123456" required>
              </div>
          <div class="col-md-5">
              <label for="inputZip" class="form-label">CEP</label>
              <input type="text" class="form-control" id="cep" placeholder="00000-000" required>
            </div>
            <div class="col-md-5">
              <label for="inputCity" class="form-label">Cidade</label>
              <input type="text" class="form-control" id="cidade">
            </div>
          <div class="col-6">
            <label for="inputAddress" class="form-label"> Endereço</label>
            <input type="text" class="form-control" id="rua" placeholder="Rua Joaquim Nabuco">
          </div>
          <div class="col-4">
            <label for="inputAddress" class="form-label"> Numero</label>
            <input type="text" class="form-control" id="numero" placeholder="123">
          </div>
          <div class="col-5">
            <label for="inputAddress2" class="form-label">Bairro</label>
            <input type="text" class="form-control" id="bairro">
          </div>
          <div class="col-md-5">
            <label for="inputState" class="form-label">Estado</label>
            <input type="text" class="form-control" id="estado">
          </div>
          <div class="col-12">
            <button style="background-color: #5271FF ;" type="submit" class="btn btn-primary" onclick="validar()">Enviar</button>
            
          </div>
          </div>
      </form>
      <!-- ... -->
<!-- ... -->
            
<script>
  // ...
  
  // Evento de clique no botão de envio do formulário
  document.querySelector('form').addEventListener('submit', function(e) {
    e.preventDefault();

    const email = document.getElementById('email').value;
    const data = document.getElementById('data').value;

    if (!validarEmail(email)) {
      alert('Insira um endereço de e-mail válido');
      return;
    }

    if (!validarData(data)) {
      alert('Insira uma data de nascimento válida no formato aaaa-mm-dd');
      return;
    }

    // Se todas as validações passarem, o formulário pode ser enviado
    this.submit();
  });

  // ...
</script>



<!-- ... -->

</body>
</html>

     <script>
      'use restrict';
//Modo restrito

//Limpar formulário
const LimparFormulario = (endereco) =>{
    document.getElementById('rua').value = '';
    document.getElementById('bairro').value = '';
    document.getElementById('cidade').value = '';
    document.getElementById('estado').value = '';
    document.getElementById('nome').value = '';
    document.getElementById('sobrenome').value = '';
}
//Verifica se CEP é válido
const eNumero = (numero) => /^[0-9]+$/.test(numero);
const cepValido = (cep) => cep.length == 8 && eNumero(cep);
//preenche campos do formulario
const preencheFormulario = (endereco) =>{
    document.getElementById('rua').value = endereco.logradouro;
    document.getElementById('bairro').value = endereco.bairro;
    document.getElementById('cidade').value = endereco.localidade;
    document.getElementById('estado').value = endereco.uf;

}
/*função para consumo de API utilizando a função do tipo assimcrona*/
const pesquisarcep = async() =>{
    LimparFormulario();
    const url = `http://viacep.com.br/ws/${cep.value}/json/`;
    if(cepValido(cep.value)){
        const dados = await fetch(url);
        const addres = await dados.json();
        if(addres.hasOwnProperty('erro')){
            alert('cep não encontrado');
    }else{
        preencheFormulario(addres);
    }
}else{
    alert('cep incorreto');
    }
}
// Adiciona um evento DOM, no input CEP
document.getElementById('cep').addEventListener('focusout', pesquisarcep);





// codigo do bootstrap
// Example starter JavaScript for disabling form submissions if there are invalid fields
(function () {
    'use strict'
  
    // Fetch all the forms we want to apply custom Bootstrap validation styles to
    var forms = document.querySelectorAll('.needs-validation')
  
    // Loop over them and prevent submission
    Array.prototype.slice.call(forms)
      .forEach(function (form) { 
        form.addEventListener('submit', function (event) {
          if (!form.checkValidity()) {
            event.preventDefault()
            event.stopPropagation()
          }
  
          form.classList.add('was-validated')
        }, false)
      })
  })()
  
     </script>
        
<script>
// Adiciona VALIDAÇAO DE CPF
  function validarCPF(cpf) {
      cpf = cpf.replace(/[^\d]+/g, ''); // Remove caracteres não numéricos

      if (cpf.length !== 11 || /^(\d)\1{10}$/.test(cpf)) {
          return false;
      }

      var soma = 0;
      for (var i = 0; i < 9; i++) {
          soma += parseInt(cpf.charAt(i)) * (10 - i);
      }

      var resto = soma % 11;

      if (resto === 1 || resto === 0) {
          if (parseInt(cpf.charAt(9)) !== 0) {
              return false;
          }
      } else if (parseInt(cpf.charAt(9)) !== 11 - resto) {
          return false;
      }

      soma = 0;
      for (i = 0; i < 10; i++) {
          soma += parseInt(cpf.charAt(i)) * (11 - i);
      }

      resto = soma % 11;

      if (resto === 1 || resto === 0) {
          if (parseInt(cpf.charAt(10)) !== 0) {
              return false;
          }
      } else if (parseInt(cpf.charAt(10)) !== 11 - resto) {
          return false;
      }

      return true;
  }

  function validar() {
      var inputCPF = document.getElementById('cpf').value;
      var resultado = validarCPF(inputCPF);
      var mensagem = document.getElementById('mensagem');

      if (resultado) {
          mensagem.textContent = 'CPF válido';
      } else {
          mensagem.textContent = 'CPF inválido';
      }

      setTimeout(function(){
          mensagem.textContent = '';
      }, 3000);
  }
</script>


<!-- Inclua este script abaixo dos outros scripts -->
<script>
  // Função para validar e-mail
  function validarEmail(email) {
    const re = /\S+@\S+\.\S+/;
    return re.test(email);

  }

  // Função para validar a data de nascimento
  function validarData(data) {
    const re = /^\d{4}-\d{2}-\d{2}$/;
    return re.test(data);
  }

 

  // Evento de clique no botão de envio do formulário
  document.querySelector('form').addEventListener('submit', function(e) {
    e.preventDefault();

    const email = document.getElementById('email').value;
    const data = document.getElementById('data').value;
    
    

    if (!validarEmail(email)) {
      alert('Insira um endereço de e-mail válido');
      return;
    }

    if (!validarData(data)) {
      alert('Insira uma data de nascimento válida no formato aaaa-mm-dd');
      return;
    }

   

    // Se todas as validações passarem, o formulário pode ser enviado
    this.submit();
  });
</script>




<p id="success-message"></p>
<script>
  document.querySelector('form').addEventListener('submit', function(e) {
    e.preventDefault();

    const nome = document.getElementById('nome').value;
    const sobrenome = document.getElementById('sobrenome').value;
    const email = document.getElementById('email').value;
    const data = document.getElementById('data').value;
    const cpf = document.getElementById('cpf').value;

    // Validação de nome
    if (nome.trim() === '') {
        alert('Por favor, insira seu nome');
        return;
    }

    // Validação de sobrenome
    if (sobrenome.trim() === '') {
        alert('Por favor, insira seu sobrenome');
        return;
    }

    // Validação de e-mail
    if (!validarEmail(email)) {
        alert('Insira um endereço de e-mail válido');
        return;
    }

    // Validação de data
    if (!validarData(data)) {
        alert('Insira uma data de nascimento válida no formato dd-mm-aaaa');
        return;
    }

    // Validação de CPF
    if (!validarCPF(cpf)) {
        alert('CPF inválido');
        return;
    }

    // Se todas as validações passarem, exiba uma mensagem de sucesso e envie o formulário
    alert('Formulário enviado com sucesso!');

    // Você também pode modificar o código para exibir a mensagem em um elemento HTML específico
    // ou redirecionar para outra página, se necessário.

    this.submit(); // Isso enviará o formulário se todas as validações passarem
});


</script>

        </form> 
      </div>
    </div>
  </main>

  <footer class="my-5 pt-5 text-muted text-center text-small">
   
      <li class="list-inline-item"><a href="index.html">Voltar</a></li>
    
  </footer>
</div>


    <script src="../assets/dist/js/bootstrap.bundle.min.js"></script>

      <script src="form-validation.js"></script>
  </body>
</html>
